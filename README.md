# Метод анализа иерархий (метод Саати)

Это приложение реализующее метод Саати

## Установка

Первоначально убедитесь, что у вас установлен [python](https://www.python.org/downloads/) 3.6 версии или выше.

Так же приложение требует пакет `numpy`. Для установки пропишите в консоли.

```bash
pip install numpy
```
## Описание структуры

Приложение состоит из двух файлов:

* `main.py` - файл запуска приложения;
* `my_math.py` - файл в котором реализованны все шаги рассчёта МАИ.

### main.py
Важные функции:
```python

def generate_json(cr, opt): 
    ...
```
Это функция автоматического создания модели для проверги алгоритма на нагрузку, сохраняет/ создаёт модель в файл `model.json`. `cr` - количество сгенерируемых случайных критериев для модели, `opt` - количество вариантов.

### my_math.py
Важные функции:
```python

def makeSignificanceTable(model_tmp_table, model, my_str):
    ...
```
Эта функция формирования попарных сравнений критериев. `model_tmp_table` - объект, хранящий в себе промежуточные вычисления, `model` - изначальная модель прочитанная с файла, `my_str` - текстовой буффер хранящий в себе таблицы расчётов.
```python

def makeOptionMatrixTables(model_tmp_table, model, my_str):
    ...
```
Эта функция формирования попарных сравнений вариантов по критерию. `model_tmp_table` - объект, хранящий в себе промежуточные вычисления, `model` - изначальная модель прочитанная с файла, `my_str` - текстовой буффер хранящий в себе таблицы расчётов.
```python

def makeFinaleMatrix(model_tmp_table, model, my_str):
    ...
```
Эта функция матрица альтернатив по критериям. `model_tmp_table` - объект, хранящий в себе промежуточные вычисления, `model` - изначальная модель прочитанная с файла, `my_str` - текстовой буффер хранящий в себе таблицы расчётов.

## Исспользование
Чтобы использовать программу  файлы `main.py, my_math.py` должны находитьсяв корневой папке языка программирования `python`. Для пользователей Windows по умолчанию ставится в:
`C:\Users\<имя пользователя>\AppData\Local\Programs\Python\<версия Python>`

Для Linux файл программы запускается в любой директории.
### Входные данные
Для работы программы файл(-ы) модели должны распологаться в той же директории, что и сам исполняемый файл `main.py`. Программа обрабатывает `.json` и `.csv` файлы. Файл формата `.json` имеет приоритет в чтении.
#### JSON
На вход подаётся модель в файле с фиксированным именем `model.json` и обладает следующей структурой:
```txt
{
  "criteria": { 
    "1" :  3,
    "2" :  4,
    "3" :  5,
    ...     ,
    "N" :  4
  },
  "options": {
    "A" :  [5, 3, 4, ..., 5],
    "B" :  [3, 4, 1, ..., 3],
    "B" :  [4, 5, 5, ..., 4],
    ...                    ,
    "M" :  [4, 5, 4, ..., 4]
  } 
}
```
Объект обязан обладать атрибутами "criteria" и "options". Критерии обладают весом значимости (от 1 до 5), где 1 - не значимый, а 5 - важный показатель. Варианты/ альтернативы обладают листом характеристик  в соответствии с критериями, каждый вариан описывает своё соответствие по каждому критерию (Пример: Альтернатива - ВАЗ, критерии: Цена, Престижность => ВАЗ : [5, 2], 5 потому что цена - дешёвая, что выгодно, 2 - потому что машина не престижная.).
#### CSV
На вход подаётся модель в 2-х файлах с фиксированным именем `criteria.csv` и  `options.csv`. 

`criteria.csv` обладает следующей структурой:

|UI|Distribution|Tracing transaction|...|N|
|---|---|---|---|---|
|3|4|5|...|4|

`options.csv` обладает следующей структурой:
|New Relic|CloudWatch|Dynatrace APM|...|M|
|---|---|---|---|---|
|5|3|4|...|4|
|3|4|5|...|5|
|4|1|5|...|4|
|...|...|...|...|...|
|5|3|4|...|4|

Критерии обладают весом значимости (от 1 до 5), где 1 - не значимый, а 5 - важный показатель. Варианты/ альтернативы обладают листом характеристик  в соответствии с критериями, каждый вариан описывает своё соответствие по каждому критерию (Пример: Альтернатива - ВАЗ, критерии: Цена, Престижность => ВАЗ : [5, 2], 5 потому что цена - дешёвая, что выгодно, 2 - потому что машина не престижная.).
### Выходные данные

На выходе пользователь получает файл `result.txt`, в котором рассписаны промежуточные таблицы расчётов для метода анализа иерархий.
```txt
########################

   Significance Table

########################
          | Dev. time | Cost dev. | Extens. | Language | Memory 
Dev. time |   1.00000 |   1.50000 | 0.75000 |  0.60000 | 1.50000
Cost dev. |   0.66667 |   1.00000 | 0.50000 |  0.40000 | 1.00000
Extens.   |   1.33333 |   2.00000 | 1.00000 |  0.80000 | 2.00000
Language  |   1.66667 |   2.50000 | 1.25000 |  1.00000 | 2.50000
Memory    |   0.66667 |   1.00000 | 0.50000 |  0.40000 | 1.00000



######################################################

   Tables of significant factors for each criterion

######################################################

	By Dev. time
          | Angular | Native JS |  React  | vue.js  |  | Weight  | % of importance
Angular   | 1.00000 |   0.40000 | 0.50000 | 0.66667 |  | 0.60428 |         0.14286
Native JS | 2.50000 |   1.00000 | 1.25000 | 1.66667 |  | 1.51069 |         0.35714
React     | 2.00000 |   0.80000 | 1.00000 | 1.33333 |  | 1.20855 |         0.28571
vue.js    | 1.50000 |   0.60000 | 0.75000 | 1.00000 |  | 0.90641 |         0.21429
SUM %: 1.0

	By Cost dev.
          | Angular | Native JS |  React  | vue.js  |  | Weight  | % of importance
Angular   | 1.00000 |   0.75000 | 0.75000 | 1.00000 |  | 0.86603 |         0.21429
Native JS | 1.33333 |   1.00000 | 1.00000 | 1.33333 |  | 1.15470 |         0.28571
React     | 1.33333 |   1.00000 | 1.00000 | 1.33333 |  | 1.15470 |         0.28571
vue.js    | 1.00000 |   0.75000 | 0.75000 | 1.00000 |  | 0.86603 |         0.21429
SUM %: 1.0

	By Extens.
          | Angular | Native JS |  React  | vue.js  |  | Weight  | % of importance
Angular   | 1.00000 |   1.00000 | 0.60000 | 0.75000 |  | 0.81904 |         0.20000
Native JS | 1.00000 |   1.00000 | 0.60000 | 0.75000 |  | 0.81904 |         0.20000
React     | 1.66667 |   1.66667 | 1.00000 | 1.25000 |  | 1.36506 |         0.33333
vue.js    | 1.33333 |   1.33333 | 0.80000 | 1.00000 |  | 1.09205 |         0.26667
SUM %: 1.0

	By Language
          | Angular | Native JS |  React  | vue.js  |  | Weight  | % of importance
Angular   | 1.00000 |   0.25000 | 0.25000 | 0.50000 |  | 0.42045 |         0.09091
Native JS | 4.00000 |   1.00000 | 1.00000 | 2.00000 |  | 1.68179 |         0.36364
React     | 4.00000 |   1.00000 | 1.00000 | 2.00000 |  | 1.68179 |         0.36364
vue.js    | 2.00000 |   0.50000 | 0.50000 | 1.00000 |  | 0.84090 |         0.18182
SUM %: 1.0

	By Memory
          | Angular | Native JS |  React  | vue.js  |  | Weight  | % of importance
Angular   | 1.00000 |   0.50000 | 0.66667 | 1.00000 |  | 0.75984 |         0.18182
Native JS | 2.00000 |   1.00000 | 1.33333 | 2.00000 |  | 1.51967 |         0.36364
React     | 1.50000 |   0.75000 | 1.00000 | 1.50000 |  | 1.13975 |         0.27273
vue.js    | 1.00000 |   0.50000 | 0.66667 | 1.00000 |  | 0.75984 |         0.18182
SUM %: 1.0

###########################################################

   Final matrix for calculating weights for each element

###########################################################

         |Dev. time|Cost dev.|Extens.  |Language |Memory   |% weight 
---------|---------|---------|---------|---------|---------|---------
Angular  |  0.14286|  0.21429|  0.20000|  0.09091|  0.18182|  0.15471
Native JS|  0.35714|  0.28571|  0.20000|  0.36364|  0.36364|  0.31177
React    |  0.28571|  0.28571|  0.33333|  0.36364|  0.27273|  0.32035
vue.js   |  0.21429|  0.21429|  0.26667|  0.18182|  0.18182|  0.21318
---------|---------|---------|---------|---------|---------|
   SP    |  0.18750|  0.12500|  0.25000|  0.31250|  0.12500|

	 Where SP - the significance of the criterion

Angular    : 0.154708
vue.js     : 0.213176
Native JS  : 0.311769
React      : 0.320346

Best item is => React 
```

#### Модель для текущего вывода результатов:
```json
{
  "criteria": { 
	  "Dev. time" : 3,
    "Cost dev." : 2,
    "Extens."   : 4,
    "Language"  : 5,
    "Memory"    : 2 
  },
  "options": {
    "Angular"   : [2, 3, 3, 1, 2],
    "Native JS" : [5, 4, 3, 4, 4],
    "React"     : [4, 4, 5, 4, 3],
    "vue.js"    : [3, 3, 4, 2, 2]
  } 
}
```
Модель в формате `.json`.
